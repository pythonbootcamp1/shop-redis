{% extends 'shop/base.html' %}

{% block title %}{{ product.name }} - 라이온 쇼핑몰{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row">
        <div class="col-md-6">
            {% if product.image %}
                <img src="{{ product.image.url }}" class="img-fluid rounded" alt="{{ product.name }}">
            {% else %}
                <div class="bg-secondary text-white d-flex align-items-center justify-content-center rounded" style="height: 400px;">
                    <i class="bi bi-image" style="font-size: 5rem;"></i>
                </div>
            {% endif %}
        </div>

        <div class="col-md-6">
            <h1>{{ product.name }}</h1>
            <p class="text-muted"><i class="bi bi-eye"></i> 조회수: {{ product.views }}</p>
            <hr>
            <h3 class="text-primary mb-3">{{ product.price|floatformat:0 }}원</h3>
            <p class="lead">{{ product.description|linebreaks }}</p>

            {% if product.stock > 0 %}
                <div class="alert alert-success">
                    <i class="bi bi-check-circle"></i> 재고: {{ product.stock }}개
                </div>

                <form method="post" action="{% url 'shop:add_to_cart' product.pk %}">
                    {% csrf_token %}
                    <div class="input-group mb-3" style="max-width: 300px;">
                        <span class="input-group-text">수량</span>
                        <input type="number" name="quantity" class="form-control" value="1" min="1" max="{{ product.stock }}">
                        <button class="btn btn-primary" type="submit">
                            <i class="bi bi-cart-plus"></i> 장바구니 담기
                        </button>
                    </div>
                </form>
            {% else %}
                <div class="alert alert-danger">
                    <i class="bi bi-x-circle"></i> 품절
                </div>
            {% endif %}

            <hr>
            <a href="{% url 'shop:product_list' %}" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left"></i> 목록으로
            </a>
            <a href="{% url 'shop:cart' %}" class="btn btn-outline-primary">
                <i class="bi bi-cart3"></i> 장바구니 보기
            </a>
        </div>
    </div>
</div>
{% endblock %}
